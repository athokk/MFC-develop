targets:
- build:
  - ./configure ${CONFIGURE_OPTIONS} ${COMPILERS} --enable-threads --enable-mpi
  - make ${MAKE_OPTIONS} ${COMPILER_FLAGS} ${COMPILERS}
  - make install
  compiler_configuration: release-cpu
  download:
    link: http://www.fftw.org/fftw-${VERSION}.tar.gz
    version: 3.3.10
  name: FFTW3
  test: []
  type: download
- build:
  - make ${MAKE_OPTIONS} ${COMPILER_FLAGS} ${COMPILERS} FFLAGS="-lfftw3 -lm -I${FFTW3:INSTALL_PATH}/include
    -L${FFTW3:INSTALL_PATH}/lib"
  compiler_configuration: release-cpu
  depends:
  - FFTW3
  name: MFC_Simulation
  source:
    source: ${MFC_ROOT_PATH}/src/simulation_code
  test: []
  type: source
- build:
  - ./configure ${CONFIGURE_OPTIONS} ${COMPILERS} --enable-parallel --enable-deprecated-symbols
  - make ${MAKE_OPTIONS} ${COMPILER_FLAGS} ${COMPILERS}
  - make install prefix="${INSTALL_PATH}"
  clone:
    git: https://github.com/HDFGroup/hdf5
    hash: 4aa40365623cf35643b262781f92578220c42bbb
  compiler_configuration: release-cpu
  name: HDF5
  test: []
  type: clone
- build:
  - ./configure ${CONFIGURE_OPTIONS} --enable-pythonmodule --enable-optimization --disable-hzip
    --disable-fpzip --disable-silex --with-hdf5="${HDF5:INSTALL_PATH}/include","${HDF5:INSTALL_PATH}/lib"
    ${COMPILERS} ${COMPILER_FLAGS} CFLAGS="-O0" CPPFLAGS="-O0" FFLAGS="-O0"
  - make ${MAKE_OPTIONS}
  - make install prefix="${INSTALL_PATH}"
  clone:
    git: https://github.com/LLNL/Silo
    hash: 9e3a31fbf661c4d26e9f5272287e5ff41971d117
  compiler_configuration: release-cpu
  depends:
  - HDF5
  name: SILO
  test: []
  type: clone
- build:
  - make ${MAKE_OPTIONS} ${COMPILER_FLAGS} ${COMPILERS} FFLAGS="-lfftw3 -lsiloh5 -lm
    -I${FFTW3:INSTALL_PATH}/include -L${FFTW3:INSTALL_PATH}/lib"
  compiler_configuration: release-cpu
  depends:
  - FFTW3
  - HDF5
  - SILO
  name: MFC_PostProcess
  source:
    source: ${MFC_ROOT_PATH}/src/post_process_code
  test: []
  type: source
- build:
  - make ${MAKE_OPTIONS} ${COMPILER_FLAGS} ${COMPILERS}
  compiler_configuration: release-cpu
  depends: []
  name: MFC_PreProcess
  source:
    source: ${MFC_ROOT_PATH}/src/pre_process_code
  test: []
  type: source
- build: []
  compiler_configuration: release-cpu
  depends:
  - MFC_PreProcess
  - MFC_Simulation
  - MFC_PostProcess
  name: MFC
  source:
    source: ${MFC_ROOT_PATH}
  test:
  - ./tests/checks.sh
  type: source
